<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CONATRADEC.Views.NuevoAnalisisFormPage"
             Shell.NavBarIsVisible="False"
             BackgroundColor="{OnPlatform WinUI='Transparent', Default={StaticResource color_Blanco}}"
             Title="Nuevo Análisis">

    <ContentView x:Name="UserPage"
                 ControlTemplate="{StaticResource FooterTemplate}">

        <ScrollView>
            <VerticalStackLayout Padding="16" Spacing="12">

                <Label Text="Formulario de Análisis de Suelo"
                       FontAttributes="Bold"
                       FontSize="22" />

                <!-- Seccion: Detalles generales (sin cambios) -->
                <Label Text="Detalles generales"
                       FontAttributes="Bold"
                       FontSize="16"
                       Margin="0,4,0,0" />

                <Frame CornerRadius="8"
                       HasShadow="True"
                       Padding="12"
                       BackgroundColor="WhiteSmoke"
                       Margin="0,6,0,0">

                    <Grid ColumnDefinitions="Auto, *"
                          RowDefinitions="Auto, Auto, Auto"
                          RowSpacing="10"
                          ColumnSpacing="12">

                        <!-- Usuario -->
                        <Frame Grid.Row="0" Grid.Column="0"
                               CornerRadius="24"
                               HeightRequest="48"
                               WidthRequest="48"
                               Padding="0"
                               VerticalOptions="Center"
                               HorizontalOptions="Start"
                               Margin="10,20,0,0"
                               BackgroundColor="#2E86AB"
                               HasShadow="False">
                            <Label Text="JM" 
                                   HorizontalOptions="Center"
                                   VerticalOptions="Center"
                                   TextColor="White"
                                   FontAttributes="Bold" />
                        </Frame>

                        <VerticalStackLayout Grid.Row="0"
                                             Grid.Column="1"
                                             Spacing="2"
                                             VerticalOptions="Center">
                            <Label x:Name="UsuarioLabel"
                                   Text="Jonathan Martinez"
                                   FontAttributes="Bold"
                                   FontSize="16" />
                            <Label Text="26martinez.508@gmail.com"
                                   TextColor="Gray"
                                   FontSize="14" />
                        </VerticalStackLayout>

                        <!-- Laboratorio -->
                        <Label Grid.Row="1" Grid.Column="0"
                               Text="Laboratorio:"
                               VerticalOptions="Center" />
                        <Entry Grid.Row="1" Grid.Column="1"
                               Placeholder="Laboratorio"
                               x:Name="LaboratorioEntry"
                               HorizontalOptions="FillAndExpand" />

                        <!-- Tipo de muestra -->
                        <HorizontalStackLayout Grid.Row="2"
                                               Grid.Column="0"
                                               Grid.ColumnSpan="2"
                                               Spacing="16">
                            <VerticalStackLayout Spacing="4"
                                                 HorizontalOptions="FillAndExpand">
                                <Label Text="Tipo de muestra:" />
                                <Label Text="Suelo"
                                       FontAttributes="Bold"
                                       FontSize="14"
                                       VerticalOptions="Center" />
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                    </Grid>
                </Frame>

                <!-- Sección: Resultados -->
                <Label Text="Resultados del análisis"
                       FontAttributes="Bold"
                       FontSize="16"
                       Margin="0,6,0,0" />

                <Frame CornerRadius="8"
                       HasShadow="True"
                       Padding="12"
                       BackgroundColor="WhiteSmoke"
                       Margin="0,6,0,0">

                    <Grid ColumnDefinitions="Auto,*,110"
                          RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto"
                          RowSpacing="12"
                          ColumnSpacing="12">

                        <!-- pH -->
                        <Label Grid.Row="0" Grid.Column="0"
                               VerticalOptions="Center"
                               Text="pH:" />
                        <Entry Grid.Row="0" Grid.Column="1"
                               x:Name="pHEntry"
                               Keyboard="Numeric"
                               Placeholder="Valor"
                               HorizontalOptions="FillAndExpand" />
                        <Picker Grid.Row="0" Grid.Column="2"
                                x:Name="pHUnitPicker"
                                SelectedIndex="0"
                                WidthRequest="110"
                                VerticalOptions="Center">
                            <Picker.Items>
                                <x:String>pH</x:String>
                                <x:String>sin unidad</x:String>
                            </Picker.Items>
                        </Picker>

                        <!-- Materia Orgánica -->
                        <Label Grid.Row="1" Grid.Column="0"
                               VerticalOptions="Center"
                               Text="Materia Orgánica:" />
                        <Entry Grid.Row="1" Grid.Column="1"
                               x:Name="MateriaOrganicaEntry"
                               Keyboard="Numeric"
                               Placeholder="Valor"
                               HorizontalOptions="FillAndExpand" />
                        <Picker Grid.Row="1" Grid.Column="2"
                                x:Name="MateriaOrganicaUnitPicker"
                                SelectedIndex="0"
                                WidthRequest="110"
                                VerticalOptions="Center">
                            <Picker.Items>
                                <x:String>%</x:String>
                                <x:String>g/kg</x:String>
                                <x:String>mg/kg</x:String>
                                <x:String>ppm</x:String>
                            </Picker.Items>
                        </Picker>

                        <!-- Potasio -->
                        <Label Grid.Row="2" Grid.Column="0"
                               VerticalOptions="Center"
                               Text="Potasio:" />
                        <Entry Grid.Row="2" Grid.Column="1"
                               x:Name="PotasioEntry"
                               Keyboard="Numeric"
                               Placeholder="Valor"
                               HorizontalOptions="FillAndExpand" />
                        <Picker Grid.Row="2" Grid.Column="2"
                                x:Name="PotasioUnitPicker"
                                SelectedIndex="0"
                                WidthRequest="110"
                                VerticalOptions="Center">
                            <Picker.Items>
                                <x:String>mg/kg</x:String>
                                <x:String>ppm</x:String>
                            </Picker.Items>
                        </Picker>

                        <!-- Fósforo disponible -->
                        <Label Grid.Row="3"
                               Grid.Column="0"
                               VerticalOptions="Center"
                               Text="Fósforo disponible:" />
                        <Entry Grid.Row="3"
                               Grid.Column="1"
                               x:Name="FosforoEntry"
                               Keyboard="Numeric"
                               Placeholder="Valor"
                               HorizontalOptions="FillAndExpand" />
                        <Picker Grid.Row="3"
                                Grid.Column="2"
                                x:Name="FosforoUnitPicker"
                                SelectedIndex="0"
                                WidthRequest="110"
                                VerticalOptions="Center">
                            <Picker.Items>
                                <x:String>mg/kg</x:String>
                                <x:String>ppm</x:String>
                                <x:String>g/kg</x:String>
                            </Picker.Items>
                        </Picker>

                        <!-- Calcio -->
                        <Label Grid.Row="4"
                               Grid.Column="0"
                               VerticalOptions="Center"
                               Text="Calcio:" />
                        <Entry Grid.Row="4"
                               Grid.Column="1"
                               x:Name="CalcioEntry"
                               Keyboard="Numeric"
                               Placeholder="Valor"
                               HorizontalOptions="FillAndExpand" />
                        <Picker Grid.Row="4"
                                Grid.Column="2"
                                x:Name="CalcioUnitPicker"
                                SelectedIndex="0"
                                WidthRequest="110"
                                VerticalOptions="Center">
                            <Picker.Items>
                                <x:String>mg/kg</x:String>
                                <x:String>g/kg</x:String>
                            </Picker.Items>
                        </Picker>

                        <!-- Magnesio -->
                        <Label Grid.Row="5"
                               Grid.Column="0"
                               VerticalOptions="Center"
                               Text="Magnesio:" />
                        <Entry Grid.Row="5"
                               Grid.Column="1"
                               x:Name="MagnesioEntry"
                               Keyboard="Numeric"
                               Placeholder="Valor"
                               HorizontalOptions="FillAndExpand" />
                        <Picker Grid.Row="5"
                                Grid.Column="2"
                                x:Name="MagnesioUnitPicker"
                                SelectedIndex="0"
                                WidthRequest="110"
                                VerticalOptions="Center">
                            <Picker.Items>
                                <x:String>mg/kg</x:String>
                                <x:String>g/kg</x:String>
                            </Picker.Items>
                        </Picker>

                    </Grid>
                </Frame>

                <Button Text="Enviar Análisis"
                        Clicked="OnEnviarAnalisisClicked"
                        Margin="0,8,0,20"
                        Style="{StaticResource AddButton}" />

            </VerticalStackLayout>
        </ScrollView>
    </ContentView>
</ContentPage>
